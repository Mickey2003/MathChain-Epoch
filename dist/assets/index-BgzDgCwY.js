var ee=Object.defineProperty;var te=(t,i,a)=>i in t?ee(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a;var T=(t,i,a)=>te(t,typeof i!="symbol"?i+"":i,a);import{r as g,a as se,g as ae,R as W}from"./vendor-DJ1oPbzn.js";import{m as o,A as M}from"./animations-Bb994duZ.js";import{c as H,h as L}from"./game-DeEegrSD.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const x of s.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&n(x)}).observe(document,{childList:!0,subtree:!0});function a(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(l){if(l.ep)return;l.ep=!0;const s=a(l);fetch(l.href,s)}})();var Y={exports:{}},k={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ie=g,ne=Symbol.for("react.element"),le=Symbol.for("react.fragment"),re=Object.prototype.hasOwnProperty,oe=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ce={key:!0,ref:!0,__self:!0,__source:!0};function z(t,i,a){var n,l={},s=null,x=null;a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),i.ref!==void 0&&(x=i.ref);for(n in i)re.call(i,n)&&!ce.hasOwnProperty(n)&&(l[n]=i[n]);if(t&&t.defaultProps)for(n in i=t.defaultProps,i)l[n]===void 0&&(l[n]=i[n]);return{$$typeof:ne,type:t,key:s,ref:x,props:l,_owner:oe.current}}k.Fragment=le;k.jsx=z;k.jsxs=z;Y.exports=k;var e=Y.exports,F={},V=se;F.createRoot=V.createRoot,F.hydrateRoot=V.hydrateRoot;const de={},_=t=>{let i;const a=new Set,n=(m,u)=>{const r=typeof m=="function"?m(i):m;if(!Object.is(r,i)){const b=i;i=u??(typeof r!="object"||r===null)?r:Object.assign({},i,r),a.forEach(c=>c(i,b))}},l=()=>i,p={setState:n,getState:l,getInitialState:()=>f,subscribe:m=>(a.add(m),()=>a.delete(m)),destroy:()=>{(de?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},f=i=t(n,l,p);return p},me=t=>t?_(t):_;var Z={exports:{}},J={},q={exports:{}},X={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G=g;function ue(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var xe=typeof Object.is=="function"?Object.is:ue,he=G.useState,pe=G.useEffect,fe=G.useLayoutEffect,be=G.useDebugValue;function ye(t,i){var a=i(),n=he({inst:{value:a,getSnapshot:i}}),l=n[0].inst,s=n[1];return fe(function(){l.value=a,l.getSnapshot=i,O(l)&&s({inst:l})},[t,a,i]),pe(function(){return O(l)&&s({inst:l}),t(function(){O(l)&&s({inst:l})})},[t]),be(a),a}function O(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!xe(t,a)}catch{return!0}}function ge(t,i){return i()}var ve=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ge:ye;X.useSyncExternalStore=G.useSyncExternalStore!==void 0?G.useSyncExternalStore:ve;q.exports=X;var je=q.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D=g,we=je;function Ne(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Ae=typeof Object.is=="function"?Object.is:Ne,Ee=we.useSyncExternalStore,Se=D.useRef,Te=D.useEffect,Be=D.useMemo,Le=D.useDebugValue;J.useSyncExternalStoreWithSelector=function(t,i,a,n,l){var s=Se(null);if(s.current===null){var x={hasValue:!1,value:null};s.current=x}else x=s.current;s=Be(function(){function p(b){if(!f){if(f=!0,m=b,b=n(b),l!==void 0&&x.hasValue){var c=x.value;if(l(c,b))return u=c}return u=b}if(c=u,Ae(m,b))return c;var v=n(b);return l!==void 0&&l(c,v)?(m=b,c):(m=b,u=v)}var f=!1,m,u,r=a===void 0?null:a;return[function(){return p(i())},r===null?void 0:function(){return p(r())}]},[i,a,n,l]);var h=Ee(t,s[0],s[1]);return Te(function(){x.hasValue=!0,x.value=h},[h]),Le(h),h};Z.exports=J;var Me=Z.exports;const Ce=ae(Me),K={},{useDebugValue:Ie}=W,{useSyncExternalStoreWithSelector:Ge}=Ce;let Q=!1;const Re=t=>t;function ke(t,i=Re,a){(K?"production":void 0)!=="production"&&a&&!Q&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Q=!0);const n=Ge(t.subscribe,t.getState,t.getServerState||t.getInitialState,i,a);return Ie(n),n}const De=t=>{(K?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const i=typeof t=="function"?me(t):t,a=(n,l)=>ke(i,n,l);return Object.assign(a,i),a},He=t=>De,Oe=t=>(i,a,n)=>{const l=n.subscribe;return n.subscribe=(x,h,p)=>{let f=x;if(h){const m=(p==null?void 0:p.equalityFn)||Object.is;let u=x(n.getState());f=r=>{const b=x(r);if(!m(u,b)){const c=u;h(u=b,c)}},p!=null&&p.fireImmediately&&h(u,u)}return l(f)},t(i,a,n)},Pe=Oe;var y=(t=>(t.ELEMENTARY="elementary",t.MIDDLE="middle",t.HIGH="high",t.COLLEGE="college",t.HELL="hell",t))(y||{}),w=(t=>(t.ADD="+",t.SUBTRACT="-",t.MULTIPLY="Ã—",t.DIVIDE="Ã·",t.POWER="^",t.SQRT="âˆš",t.LOG="log",t.SIN="sin",t.COS="cos",t.TAN="tan",t.INTEGRAL="âˆ«",t.DERIVATIVE="d/dx",t))(w||{}),S=(t=>(t.MATCH="match",t.COMBO="combo",t.POWER_UP="powerup",t.LEVEL_UP="levelup",t.GAME_OVER="gameover",t.BUTTON_CLICK="click",t.WRONG_MATCH="wrong",t.TIME_WARNING="warning",t))(S||{});const P={level:1,score:0,moves:0,timeLeft:300,difficulty:y.ELEMENTARY,isPlaying:!1,isPaused:!1,isGameOver:!1,combo:0,maxCombo:0,blocks:[],selectedBlocks:[],currentExpression:null,powerUps:[{id:"bomb",type:"bomb",count:3,description:"ç‚¸å¼¹ï¼šæ¶ˆé™¤å‘¨å›´3x3åŒºåŸŸ",icon:"ðŸ’£"},{id:"lightning",type:"lightning",count:2,description:"é—ªç”µï¼šæ¶ˆé™¤æ•´è¡Œæˆ–æ•´åˆ—",icon:"âš¡"},{id:"shuffle",type:"shuffle",count:1,description:"æ´—ç‰Œï¼šé‡æ–°æŽ’åˆ—æ‰€æœ‰æ–¹å—",icon:"ðŸ”€"},{id:"hint",type:"hint",count:5,description:"æç¤ºï¼šæ˜¾ç¤ºå¯èƒ½çš„åŒ¹é…",icon:"ðŸ’¡"},{id:"time",type:"time",count:1,description:"æ—¶é—´ï¼šå¢žåŠ 30ç§’",icon:"â°"}]},Fe={totalGamesPlayed:0,totalScore:0,bestScore:0,averageScore:0,totalTime:0,levelsCompleted:0,perfectGames:0,difficultyStats:{[y.ELEMENTARY]:{gamesPlayed:0,bestScore:0,averageScore:0,levelsCompleted:0},[y.MIDDLE]:{gamesPlayed:0,bestScore:0,averageScore:0,levelsCompleted:0},[y.HIGH]:{gamesPlayed:0,bestScore:0,averageScore:0,levelsCompleted:0},[y.COLLEGE]:{gamesPlayed:0,bestScore:0,averageScore:0,levelsCompleted:0},[y.HELL]:{gamesPlayed:0,bestScore:0,averageScore:0,levelsCompleted:0}}},B=He()(Pe((t,i)=>({...P,animations:[],particles:[],stats:Fe,soundEnabled:!0,musicEnabled:!0,vibrationEnabled:!0,startGame:a=>{t({...P,difficulty:a,isPlaying:!0,timeLeft:a===y.HELL?180:300}),i().generateNewBlocks()},pauseGame:()=>t({isPaused:!0}),resumeGame:()=>t({isPaused:!1}),endGame:()=>{t({isPlaying:!1,isGameOver:!0}),i().updateStats()},resetGame:()=>t(P),selectBlock:a=>{const{selectedBlocks:n}=i();n.some(s=>s.id===a.id)?t({selectedBlocks:n.filter(s=>s.id!==a.id)}):n.length<3&&(t({selectedBlocks:[...n,a]}),n.length===2&&setTimeout(()=>i().checkMatch(),100))},clearSelection:()=>t({selectedBlocks:[]}),checkMatch:()=>{const{selectedBlocks:a}=i();return a.length!==3?!1:Math.random()>.5?(i().processMatch(),!0):(i().clearSelection(),!1)},processMatch:()=>{const{selectedBlocks:a,combo:n}=i(),l=100,s=Math.max(1,n),x=l*s*a.length;i().addScore(x),i().incrementCombo(),i().clearSelection(),a.forEach(h=>{i().addAnimation({id:`match-${h.id}`,type:"match",x:h.x,y:h.y,duration:500})}),setTimeout(()=>{i().dropBlocks(),i().generateNewBlocks()},500)},dropBlocks:()=>{console.log("Dropping blocks...")},generateNewBlocks:()=>{console.log("Generating new blocks...")},addScore:a=>{t(n=>({score:n.score+a}))},incrementCombo:()=>{t(a=>({combo:a.combo+1,maxCombo:Math.max(a.maxCombo,a.combo+1)}))},resetCombo:()=>t({combo:0}),nextLevel:()=>{t(a=>({level:a.level+1}))},usePowerUp:a=>{t(n=>({powerUps:n.powerUps.map(l=>l.type===a&&l.count>0?{...l,count:l.count-1}:l)}))},addPowerUp:a=>{t(n=>({powerUps:n.powerUps.map(l=>l.type===a.type?{...l,count:l.count+a.count}:l)}))},addAnimation:a=>{t(n=>({animations:[...n.animations,a]}))},removeAnimation:a=>{t(n=>({animations:n.animations.filter(l=>l.id!==a)}))},addParticle:a=>{t(n=>({particles:[...n.particles,a]}))},removeParticle:a=>{t(n=>({particles:n.particles.filter(l=>l.id!==a)}))},updateStats:()=>{const{score:a,difficulty:n,level:l}=i();t(s=>({stats:{...s.stats,totalGamesPlayed:s.stats.totalGamesPlayed+1,totalScore:s.stats.totalScore+a,bestScore:Math.max(s.stats.bestScore,a),averageScore:(s.stats.totalScore+a)/(s.stats.totalGamesPlayed+1),levelsCompleted:s.stats.levelsCompleted+(l>1?1:0),difficultyStats:{...s.stats.difficultyStats,[n]:{...s.stats.difficultyStats[n],gamesPlayed:s.stats.difficultyStats[n].gamesPlayed+1,bestScore:Math.max(s.stats.difficultyStats[n].bestScore,a),averageScore:(s.stats.difficultyStats[n].averageScore*s.stats.difficultyStats[n].gamesPlayed+a)/(s.stats.difficultyStats[n].gamesPlayed+1),levelsCompleted:s.stats.difficultyStats[n].levelsCompleted+(l>1?1:0)}}}}))},toggleSound:()=>t(a=>({soundEnabled:!a.soundEnabled})),toggleMusic:()=>t(a=>({musicEnabled:!a.musicEnabled})),toggleVibration:()=>t(a=>({vibrationEnabled:!a.vibrationEnabled}))}))),Ue=({block:t,onClick:i,isSelected:a,delay:n=0})=>{const l=()=>typeof t.value=="string"?t.value:t.value.toString(),s=()=>{let m=`game-block ${t.color}`;return a&&(m+=" selected"),t.isMatched&&(m+=" matched"),t.type==="operation"&&(m+=" font-bold text-xl"),m},x=()=>{const m=l();return m.length>3?"text-sm":m.length>2?"text-base":"text-lg"},h={hidden:{opacity:0,scale:0,rotateY:-180},visible:{opacity:1,scale:1,rotateY:0,transition:{type:"spring",stiffness:100,damping:15,delay:n}},hover:{scale:1.05,rotateY:5,transition:{type:"spring",stiffness:400,damping:10}},tap:{scale:.95,transition:{type:"spring",stiffness:400,damping:10}},selected:{scale:1.1,rotateY:10,boxShadow:"0 0 20px rgba(251, 191, 36, 0.8)",transition:{type:"spring",stiffness:300,damping:15}},matched:{scale:0,opacity:0,rotateY:180,transition:{duration:.5,ease:"easeInOut"}}},p=()=>a?e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(8)].map((m,u)=>e.jsx(o.div,{className:"absolute w-1 h-1 bg-yellow-400 rounded-full",initial:{x:"50%",y:"50%",scale:0},animate:{x:`${50+Math.cos(u*Math.PI/4)*100}%`,y:`${50+Math.sin(u*Math.PI/4)*100}%`,scale:[0,1,0],opacity:[0,1,0]},transition:{duration:1,repeat:1/0,delay:u*.1}},u))}):null,f=()=>t.type==="operation"?e.jsx(o.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"}}):null;return e.jsxs(o.div,{className:`${s()} ${x()} relative overflow-hidden cursor-pointer select-none`,variants:h,initial:"hidden",animate:t.isMatched?"matched":a?"selected":"visible",whileHover:!t.isMatched&&!a?"hover":void 0,whileTap:t.isMatched?void 0:"tap",onClick:i,style:{aspectRatio:"1",minHeight:"40px",minWidth:"40px"},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),f(),e.jsx(p,{}),e.jsx("div",{className:"relative z-10 w-full h-full flex items-center justify-center",children:e.jsx(o.span,{className:"font-bold drop-shadow-sm",animate:a?{scale:[1,1.1,1],transition:{duration:.5,repeat:1/0}}:{},children:l()})}),a&&e.jsx(o.div,{className:"absolute inset-0 border-2 border-yellow-400 rounded-lg",initial:{opacity:0},animate:{opacity:[0,1,0],scale:[1,1.05,1]},transition:{duration:1,repeat:1/0}}),t.isMatched&&e.jsx(o.div,{className:"absolute inset-0 bg-green-400 rounded-lg flex items-center justify-center",initial:{scale:0,opacity:0},animate:{scale:[0,1.2,0],opacity:[0,1,0]},transition:{duration:.6},children:e.jsx("span",{className:"text-white text-2xl",children:"âœ“"})}),e.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 rounded-full opacity-60",children:e.jsx("div",{className:`w-full h-full rounded-full ${t.type==="number"?"bg-blue-400":t.type==="operation"?"bg-orange-400":"bg-green-400"}`})})]})},R=8,Ve=()=>{const{difficulty:t,selectedBlocks:i,selectBlock:a,isPlaying:n,isPaused:l}=B(),[s,x]=g.useState([]),[h,p]=g.useState(!1),f=g.useCallback(c=>{switch(c){case y.ELEMENTARY:return{numberRange:[1,20],operations:[w.ADD,w.SUBTRACT,w.MULTIPLY],maxResult:100};case y.MIDDLE:return{numberRange:[1,50],operations:[w.ADD,w.SUBTRACT,w.MULTIPLY,w.DIVIDE],maxResult:200};case y.HIGH:return{numberRange:[1,100],operations:[w.ADD,w.SUBTRACT,w.MULTIPLY,w.DIVIDE,w.POWER],maxResult:500};case y.COLLEGE:return{numberRange:[1,200],operations:[w.ADD,w.SUBTRACT,w.MULTIPLY,w.DIVIDE,w.POWER,w.SQRT,w.LOG],maxResult:1e3};case y.HELL:return{numberRange:[1,500],operations:Object.values(w),maxResult:1e4};default:return{numberRange:[1,20],operations:[w.ADD,w.SUBTRACT],maxResult:50}}},[]),m=g.useCallback(c=>{const{numberRange:v,operations:A}=c,j=A[Math.floor(Math.random()*A.length)];let d=Math.floor(Math.random()*(v[1]-v[0]+1))+v[0],N=Math.floor(Math.random()*(v[1]-v[0]+1))+v[0],E;switch(j){case w.ADD:E=d+N;break;case w.SUBTRACT:E=d-N,E<0&&([d,N]=[N,d],E=d-N);break;case w.MULTIPLY:E=d*N;break;case w.DIVIDE:E=d,d=E*N;break;case w.POWER:N=Math.min(N,4),E=Math.pow(d,N);break;default:E=d+N}return{operand1:d,operation:j,operand2:N,result:E}},[]),u=g.useCallback(()=>{const c=f(t),v=[],A=[];for(let j=0;j<5;j++)A.push(m(c));for(let j=0;j<R;j++){v[j]=[];for(let d=0;d<R;d++){const N=`${j}-${d}`;if(Math.random()<.3&&A.length>0){const E=A[Math.floor(Math.random()*A.length)],C=[E.operand1,E.operation,E.operand2,E.result],U=C[Math.floor(Math.random()*C.length)];v[j][d]={id:N,value:U,x:d,y:j,type:typeof U=="number"?"number":"operation",isSelected:!1,isMatched:!1,isAnimating:!1,color:r(t),difficulty:t}}else if(Math.random()<.7){const C=Math.floor(Math.random()*(c.numberRange[1]-c.numberRange[0]+1))+c.numberRange[0];v[j][d]={id:N,value:C,x:d,y:j,type:"number",isSelected:!1,isMatched:!1,isAnimating:!1,color:r(t),difficulty:t}}else{const C=c.operations[Math.floor(Math.random()*c.operations.length)];v[j][d]={id:N,value:C,operation:C,x:d,y:j,type:"operation",isSelected:!1,isMatched:!1,isAnimating:!1,color:r(t),difficulty:t}}}}return v},[t,f,m]),r=c=>{switch(c){case y.ELEMENTARY:return"difficulty-elementary";case y.MIDDLE:return"difficulty-middle";case y.HIGH:return"difficulty-high";case y.COLLEGE:return"difficulty-college";case y.HELL:return"difficulty-hell";default:return"difficulty-elementary"}},b=c=>{!n||l||c.isMatched||c.isAnimating||a(c)};return g.useEffect(()=>{if(n&&!h){const c=u();x(c),p(!0)}},[n,h,u]),g.useEffect(()=>{n||(p(!1),x([]))},[n]),!n||s.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"loading-spinner"})}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx(o.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"game-board",style:{gridTemplateColumns:`repeat(${R}, 1fr)`,gridTemplateRows:`repeat(${R}, 1fr)`,width:"min(90vw, 90vh)",height:"min(90vw, 90vh)",maxWidth:"600px",maxHeight:"600px"},children:e.jsx(M,{children:s.map((c,v)=>c.map((A,j)=>e.jsx(Ue,{block:A,onClick:()=>b(A),isSelected:i.some(d=>d.id===A.id),delay:v*.05+j*.02},A.id)))})}),i.length>0&&e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4 p-4 bg-white/10 backdrop-blur-sm rounded-lg",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsxs("p",{className:"text-sm mb-2",children:["å·²é€‰æ‹© ",i.length,"/3 ä¸ªæ–¹å—"]}),e.jsx("div",{className:"flex gap-2 justify-center",children:i.map((c,v)=>e.jsxs("span",{className:"px-2 py-1 bg-yellow-500 rounded text-black font-bold",children:[c.value,v<i.length-1&&e.jsx("span",{className:"ml-1",children:"â†’"})]},c.id))}),i.length<3&&e.jsx("p",{className:"text-xs mt-2 opacity-75",children:"é€‰æ‹©æ•°å­—å’Œè¿ç®—ç¬¦ç»„æˆæ•°å­¦è¡¨è¾¾å¼"})]})})]})},_e=({onPause:t,onMenu:i})=>{const{level:a,score:n,moves:l,timeLeft:s,difficulty:x,combo:h,maxCombo:p,powerUps:f,usePowerUp:m}=B(),[u,r]=g.useState(0),[b,c]=g.useState(!1);g.useEffect(()=>{const d=setInterval(()=>{r(N=>{const E=n-N;return E===0?N:N+Math.ceil(E/10)})},50);return()=>clearInterval(d)},[n]),g.useEffect(()=>{c(s<=30&&s>0)},[s]);const v=d=>{const N=Math.floor(d/60),E=d%60;return`${N}:${E.toString().padStart(2,"0")}`},A=()=>({elementary:"å°å­¦",middle:"åˆä¸­",high:"é«˜ä¸­",college:"å¤§å­¦",hell:"åœ°ç‹±"})[x]||"æœªçŸ¥",j=()=>({elementary:"text-green-400",middle:"text-blue-400",high:"text-purple-400",college:"text-yellow-400",hell:"text-red-400"})[x]||"text-gray-400";return e.jsx("div",{className:"w-full bg-black/20 backdrop-blur-sm border-b border-white/10",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("div",{className:"text-sm opacity-75",children:"ç­‰çº§"}),e.jsx("div",{className:"text-xl font-bold",children:a}),e.jsx("div",{className:`text-xs ${j()}`,children:A()})]}),e.jsxs("div",{className:"text-white",children:[e.jsx("div",{className:"text-sm opacity-75",children:"åˆ†æ•°"}),e.jsx(o.div,{className:"text-2xl font-bold",animate:u!==n?{scale:[1,1.1,1]}:{},transition:{duration:.3},children:u.toLocaleString()})]}),e.jsx(M,{children:h>0&&e.jsxs(o.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"text-white",children:[e.jsx("div",{className:"text-sm opacity-75",children:"è¿žå‡»"}),e.jsxs(o.div,{className:"text-xl font-bold text-yellow-400",animate:{scale:[1,1.2,1],textShadow:["0 0 0px rgba(251, 191, 36, 0)","0 0 10px rgba(251, 191, 36, 0.8)","0 0 0px rgba(251, 191, 36, 0)"]},transition:{duration:.5,repeat:1/0},children:[h,"x"]}),e.jsxs("div",{className:"text-xs text-yellow-300",children:["æœ€é«˜: ",p,"x"]})]})}),e.jsxs("div",{className:"text-white",children:[e.jsx("div",{className:"text-sm opacity-75",children:"ç§»åŠ¨"}),e.jsx("div",{className:"text-xl font-bold",children:l})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-white opacity-75 mb-1",children:"å‰©ä½™æ—¶é—´"}),e.jsx(o.div,{className:`text-3xl font-bold ${b?"text-red-400":"text-white"}`,animate:b?{scale:[1,1.1,1],color:["#f87171","#dc2626","#f87171"]}:{},transition:{duration:.5,repeat:b?1/0:0},children:v(s)}),b&&e.jsx(o.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1,repeat:1/0},className:"text-xs text-red-300 mt-1",children:"âš ï¸ æ—¶é—´ä¸è¶³ï¼"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex space-x-2",children:f.slice(0,3).map(d=>e.jsxs(o.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>d.count>0&&m(d.type),disabled:d.count===0,className:`
                    relative w-12 h-12 rounded-lg border-2 transition-all
                    ${d.count>0?"bg-blue-600 border-blue-400 hover:bg-blue-500 cursor-pointer":"bg-gray-600 border-gray-500 cursor-not-allowed opacity-50"}
                  `,title:d.description,children:[e.jsx("span",{className:"text-lg",children:d.icon}),d.count>0&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-500 rounded-full flex items-center justify-center text-xs font-bold text-black",children:d.count})]},d.id))}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg font-bold transition-colors",children:"â¸ï¸ æš‚åœ"}),e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg font-bold transition-colors",children:"ðŸ  èœå•"})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx(o.div,{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full",initial:{width:0},animate:{width:`${Math.min(n/(a*1e3)*100,100)}%`},transition:{duration:.5}})}),e.jsxs("div",{className:"text-xs text-white opacity-75 mt-1 text-center",children:["ä¸‹ä¸€ç­‰çº§: ",(a*1e3).toLocaleString()," åˆ†"]})]})]})})},I={[y.ELEMENTARY]:{name:"å°å­¦",description:"åŸºç¡€åŠ å‡ä¹˜é™¤",color:"from-green-400 to-green-600",icon:"ðŸŒ±",examples:["2 + 3 = 5","8 - 4 = 4","3 Ã— 2 = 6"]},[y.MIDDLE]:{name:"åˆä¸­",description:"åˆ†æ•°ã€è´Ÿæ•°ã€ç®€å•ä»£æ•°",color:"from-blue-400 to-blue-600",icon:"ðŸ“š",examples:["2x + 3 = 7","1/2 + 1/3 = 5/6","(-2) Ã— 3 = -6"]},[y.HIGH]:{name:"é«˜ä¸­",description:"å‡½æ•°ã€ä¸‰è§’ã€æŒ‡æ•°",color:"from-purple-400 to-purple-600",icon:"ðŸŽ“",examples:["sin(30Â°) = 1/2","2Â³ = 8","logâ‚‚(8) = 3"]},[y.COLLEGE]:{name:"å¤§å­¦",description:"å¾®ç§¯åˆ†ã€çº¿æ€§ä»£æ•°",color:"from-yellow-400 to-orange-600",icon:"ðŸ”¬",examples:["âˆ«x dx = xÂ²/2","d/dx(xÂ²) = 2x","|A| = det(A)"]},[y.HELL]:{name:"åœ°ç‹±",description:"é«˜ç­‰æ•°å­¦ã€å¤åˆ†æž",color:"from-red-400 to-red-600",icon:"ðŸ”¥",examples:["âˆ® f(z)dz = 0","Î“(n) = (n-1)!","Î¶(s) = Î£ 1/nË¢"]}},Qe=({onStartGame:t,onShowSettings:i,onShowStats:a})=>{const[n,l]=g.useState(null),[s,x]=g.useState(!1),h=u=>{l(u),x(!0)},p=()=>{n&&t(n)},f={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},m={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return e.jsx("div",{className:"flex flex-col items-center justify-center h-full p-6 text-white",children:e.jsxs(o.div,{variants:f,initial:"hidden",animate:"visible",className:"text-center max-w-4xl w-full",children:[e.jsxs(o.div,{variants:m,className:"mb-8",children:[e.jsx("h1",{className:"text-6xl md:text-8xl font-black font-game bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-4",children:"MathChain"}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-blue-200 mb-2",children:"æ•°é“¾çºªå…ƒ"}),e.jsx("p",{className:"text-lg text-blue-300 opacity-80",children:"æ•°å­¦æ¶ˆé™¤ Â· æ™ºæ…§æŒ‘æˆ˜ Â· æ— é™å¯èƒ½"})]}),s?e.jsx(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"max-w-2xl mx-auto",children:n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:I[n].icon}),e.jsxs("h3",{className:"text-4xl font-bold mb-4",children:[I[n].name,"çº§éš¾åº¦"]}),e.jsx("p",{className:"text-xl text-blue-200 mb-6",children:I[n].description})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-xl font-bold mb-4",children:"é¢˜ç›®ç¤ºä¾‹ï¼š"}),e.jsx("div",{className:"grid gap-3",children:I[n].examples.map((u,r)=>e.jsx(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.1},className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center font-mono text-lg",children:u},r))})]}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>x(!1),className:"btn bg-gray-600 hover:bg-gray-700 px-8 py-3",children:"â† è¿”å›ž"}),e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:p,className:`btn bg-gradient-to-r ${I[n].color} px-12 py-3 text-xl font-bold`,children:"ðŸš€ å¼€å§‹æ¸¸æˆ"})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(o.div,{variants:m,className:"mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6 text-center",children:"é€‰æ‹©éš¾åº¦"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-4xl mx-auto",children:Object.entries(I).map(([u,r])=>e.jsxs(o.button,{variants:m,whileHover:{scale:1.05,y:-5},whileTap:{scale:.95},onClick:()=>h(u),className:`
                      relative p-6 rounded-2xl bg-gradient-to-br ${r.color}
                      shadow-lg hover:shadow-xl transition-all duration-300
                      border border-white/20 backdrop-blur-sm
                      group overflow-hidden
                    `,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"text-4xl mb-3",children:r.icon}),e.jsx("h4",{className:"text-xl font-bold mb-2",children:r.name}),e.jsx("p",{className:"text-sm opacity-90",children:r.description})]})]},u))})]}),e.jsxs(o.div,{variants:m,className:"flex flex-wrap justify-center gap-4",children:[e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"btn btn-secondary px-8 py-3",children:"ðŸ“Š æ¸¸æˆç»Ÿè®¡"}),e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"btn btn-primary px-8 py-3",children:"âš™ï¸ è®¾ç½®"})]})]}),!s&&e.jsx(o.div,{variants:m,className:"mt-12 text-center",children:e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-6 max-w-2xl mx-auto",children:[e.jsx("h4",{className:"text-lg font-bold mb-3",children:"ðŸŽ® æ¸¸æˆçŽ©æ³•"}),e.jsx("p",{className:"text-sm text-blue-200 leading-relaxed",children:"é€‰æ‹©ä¸‰ä¸ªæ–¹å—ç»„æˆæ­£ç¡®çš„æ•°å­¦è¡¨è¾¾å¼è¿›è¡Œæ¶ˆé™¤ã€‚è¿žç»­æ¶ˆé™¤å¯èŽ·å¾—è¿žå‡»å¥–åŠ±ï¼ ä½¿ç”¨é“å…·å¸®åŠ©ä½ è§£å†³å›°éš¾çš„å±€é¢ï¼ŒæŒ‘æˆ˜æ›´é«˜çš„åˆ†æ•°å’Œç­‰çº§ã€‚"})]})})]})})},$e=({onResume:t,onRestart:i,onMenu:a,onSettings:n})=>{const{score:l,level:s,combo:x,timeLeft:h}=B(),p=r=>{const b=Math.floor(r/60),c=r%60;return`${b}:${c.toString().padStart(2,"0")}`},f={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}},m={hidden:{opacity:0,scale:.8,y:-50},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,scale:.8,y:50,transition:{duration:.2}}},u={hover:{scale:1.05,transition:{type:"spring",stiffness:400,damping:10}},tap:{scale:.95,transition:{type:"spring",stiffness:400,damping:10}}};return e.jsx(o.div,{className:"modal-overlay",variants:f,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs(o.div,{className:"modal-content bg-gradient-to-br from-gray-900 to-gray-800 text-white max-w-md w-full mx-4",variants:m,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(o.h2,{className:"text-3xl font-bold mb-2",animate:{textShadow:["0 0 0px rgba(59, 130, 246, 0)","0 0 10px rgba(59, 130, 246, 0.5)","0 0 0px rgba(59, 130, 246, 0)"]},transition:{duration:2,repeat:1/0},children:"â¸ï¸ æ¸¸æˆæš‚åœ"}),e.jsx("p",{className:"text-gray-300",children:"æ¸¸æˆå·²æš‚åœï¼Œé€‰æ‹©ä½ çš„ä¸‹ä¸€æ­¥è¡ŒåŠ¨"})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"å½“å‰çŠ¶æ€"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:l.toLocaleString()}),e.jsx("div",{className:"text-sm text-gray-300",children:"åˆ†æ•°"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-400",children:s}),e.jsx("div",{className:"text-sm text-gray-300",children:"ç­‰çº§"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[x,"x"]}),e.jsx("div",{className:"text-sm text-gray-300",children:"è¿žå‡»"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:p(h)}),e.jsx("div",{className:"text-sm text-gray-300",children:"å‰©ä½™æ—¶é—´"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o.button,{variants:u,whileHover:"hover",whileTap:"tap",onClick:t,className:"w-full btn btn-primary text-lg py-4 flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-xl",children:"â–¶ï¸"}),"ç»§ç»­æ¸¸æˆ"]}),e.jsxs(o.button,{variants:u,whileHover:"hover",whileTap:"tap",onClick:n,className:"w-full btn btn-secondary text-lg py-3 flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-xl",children:"âš™ï¸"}),"è®¾ç½®"]}),e.jsxs(o.button,{variants:u,whileHover:"hover",whileTap:"tap",onClick:i,className:"w-full btn btn-warning text-lg py-3 flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-xl",children:"ðŸ”„"}),"é‡æ–°å¼€å§‹"]}),e.jsxs(o.button,{variants:u,whileHover:"hover",whileTap:"tap",onClick:a,className:"w-full btn btn-danger text-lg py-3 flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-xl",children:"ðŸ "}),"è¿”å›žä¸»èœå•"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-400",children:["ðŸ’¡ æç¤ºï¼šæŒ‰ ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs",children:"ESC"})," æˆ–",e.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs ml-1",children:"ç©ºæ ¼"})," ç»§ç»­æ¸¸æˆ"]})}),e.jsx("div",{className:"absolute top-4 right-4 opacity-20",children:e.jsx(o.div,{animate:{rotate:360},transition:{duration:10,repeat:1/0,ease:"linear"},className:"text-4xl",children:"âš™ï¸"})})]})})},We=({onRestart:t,onMenu:i})=>{const{score:a,level:n,maxCombo:l,moves:s,difficulty:x,stats:h}=B(),[p,f]=g.useState(!1),[m,u]=g.useState(!1);g.useEffect(()=>{const d=a>h.bestScore;u(d),d&&(H({particleCount:100,spread:70,origin:{y:.6}}),setTimeout(()=>{H({particleCount:50,angle:60,spread:55,origin:{x:0}})},250),setTimeout(()=>{H({particleCount:50,angle:120,spread:55,origin:{x:1}})},400))},[a,h.bestScore]),g.useEffect(()=>{const d=setTimeout(()=>f(!0),1e3);return()=>clearTimeout(d)},[]);const r=()=>({elementary:"å°å­¦",middle:"åˆä¸­",high:"é«˜ä¸­",college:"å¤§å­¦",hell:"åœ°ç‹±"})[x]||"æœªçŸ¥",c=(()=>{const d=Math.min(a/(n*1e3)*100,100);return d>=90?{grade:"S",color:"text-yellow-400",message:"å®Œç¾Žè¡¨çŽ°ï¼"}:d>=80?{grade:"A",color:"text-green-400",message:"ä¼˜ç§€ï¼"}:d>=70?{grade:"B",color:"text-blue-400",message:"è‰¯å¥½ï¼"}:d>=60?{grade:"C",color:"text-purple-400",message:"åŠæ ¼ï¼"}:{grade:"D",color:"text-red-400",message:"éœ€è¦åŠªåŠ›ï¼"}})(),v={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}},A={hidden:{opacity:0,scale:.5,y:100},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:200,damping:20,delay:.2}}},j={hidden:{opacity:0,x:-20},visible:d=>({opacity:1,x:0,transition:{delay:d*.1+.5}})};return e.jsx(o.div,{className:"modal-overlay",variants:v,initial:"hidden",animate:"visible",children:e.jsxs(o.div,{className:"modal-content bg-gradient-to-br from-gray-900 to-gray-800 text-white max-w-lg w-full mx-4",variants:A,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(o.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring",stiffness:200},className:"text-6xl mb-4",children:m?"ðŸ†":"ðŸŽ®"}),e.jsx(o.h2,{className:"text-4xl font-bold mb-2",animate:m?{color:["#fbbf24","#f59e0b","#fbbf24"],textShadow:["0 0 0px rgba(251, 191, 36, 0)","0 0 20px rgba(251, 191, 36, 0.8)","0 0 0px rgba(251, 191, 36, 0)"]}:{},transition:{duration:1,repeat:m?1/0:0},children:m?"ðŸŽ‰ æ–°è®°å½•ï¼":"æ¸¸æˆç»“æŸ"}),e.jsxs("p",{className:"text-gray-300",children:[r(),"éš¾åº¦ Â· ç­‰çº§ ",n]})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(o.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.5,type:"spring",stiffness:200},className:`text-8xl font-bold ${c.color} mb-2`,children:c.grade}),e.jsx("p",{className:"text-lg text-gray-300",children:c.message})]}),p&&e.jsxs("div",{className:"bg-black/20 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-center",children:"æ¸¸æˆç»Ÿè®¡"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"æœ€ç»ˆåˆ†æ•°",value:a.toLocaleString(),color:"text-blue-400"},{label:"è¾¾åˆ°ç­‰çº§",value:n,color:"text-purple-400"},{label:"æœ€é«˜è¿žå‡»",value:`${l}x`,color:"text-yellow-400"},{label:"ç§»åŠ¨æ¬¡æ•°",value:s,color:"text-green-400"}].map((d,N)=>e.jsxs(o.div,{custom:N,variants:j,initial:"hidden",animate:"visible",className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${d.color}`,children:d.value}),e.jsx("div",{className:"text-sm text-gray-300",children:d.label})]},d.label))})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-900/30 to-purple-900/30 rounded-lg p-3 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-300 mb-1",children:"åŽ†å²æœ€ä½³åˆ†æ•°"}),e.jsx("div",{className:"text-xl font-bold text-yellow-400",children:Math.max(a,h.bestScore).toLocaleString()}),m&&e.jsx(o.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-xs text-green-400 mt-1",children:"âœ¨ åˆšåˆšåˆ›é€ ï¼"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"w-full btn btn-primary text-lg py-4 flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-xl",children:"ðŸ”„"}),"å†æ¥ä¸€å±€"]}),e.jsxs(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"w-full btn btn-secondary text-lg py-3 flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-xl",children:"ðŸ "}),"è¿”å›žä¸»èœå•"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-400",children:"ðŸŽ¯ æŒ‘æˆ˜æœ‹å‹ä¸€èµ·æ¥çŽ©æ•°é“¾çºªå…ƒï¼"})}),m&&e.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-2xl",children:[...Array(20)].map((d,N)=>e.jsx(o.div,{className:"absolute w-2 h-2 bg-yellow-400 rounded-full",initial:{x:"50%",y:"50%",scale:0},animate:{x:`${Math.random()*100}%`,y:`${Math.random()*100}%`,scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2,delay:Math.random()*2,repeat:1/0}},N))})]})})},Ye=({onClose:t})=>{const{soundEnabled:i,musicEnabled:a,vibrationEnabled:n,toggleSound:l,toggleMusic:s,toggleVibration:x}=B(),h={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},p={hidden:{opacity:0,scale:.8,y:-50},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,scale:.8,y:50}},f=({enabled:m,onToggle:u,label:r,description:b,icon:c})=>e.jsxs(o.div,{whileHover:{scale:1.02},className:"flex items-center justify-between p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:c}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:r}),e.jsx("div",{className:"text-sm text-gray-300",children:b})]})]}),e.jsx(o.button,{whileTap:{scale:.95},onClick:u,className:`
          relative w-14 h-8 rounded-full transition-colors duration-200
          ${m?"bg-blue-500":"bg-gray-600"}
        `,children:e.jsx(o.div,{className:"absolute top-1 w-6 h-6 bg-white rounded-full shadow-md",animate:{x:m?30:2},transition:{type:"spring",stiffness:500,damping:30}})})]});return e.jsx(o.div,{className:"modal-overlay",variants:h,initial:"hidden",animate:"visible",exit:"exit",onClick:t,children:e.jsxs(o.div,{className:"modal-content bg-gradient-to-br from-gray-900 to-gray-800 text-white max-w-md w-full mx-4",variants:p,initial:"hidden",animate:"visible",exit:"exit",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(o.h2,{className:"text-3xl font-bold mb-2",animate:{textShadow:["0 0 0px rgba(59, 130, 246, 0)","0 0 10px rgba(59, 130, 246, 0.5)","0 0 0px rgba(59, 130, 246, 0)"]},transition:{duration:2,repeat:1/0},children:"âš™ï¸ æ¸¸æˆè®¾ç½®"}),e.jsx("p",{className:"text-gray-300",children:"è‡ªå®šä¹‰ä½ çš„æ¸¸æˆä½“éªŒ"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-blue-400",children:"ðŸ”Š éŸ³é¢‘è®¾ç½®"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(f,{enabled:i,onToggle:l,label:"éŸ³æ•ˆ",description:"æ¸¸æˆéŸ³æ•ˆå’Œæç¤ºéŸ³",icon:"ðŸ”Š"}),e.jsx(f,{enabled:a,onToggle:s,label:"èƒŒæ™¯éŸ³ä¹",description:"æ¸¸æˆèƒŒæ™¯éŸ³ä¹",icon:"ðŸŽµ"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-purple-400",children:"ðŸ“± åé¦ˆè®¾ç½®"}),e.jsx("div",{className:"space-y-3",children:e.jsx(f,{enabled:n,onToggle:x,label:"éœ‡åŠ¨åé¦ˆ",description:"è§¦æ‘¸å’Œæ“ä½œæ—¶çš„éœ‡åŠ¨åé¦ˆ",icon:"ðŸ“³"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-green-400",children:"â„¹ï¸ æ¸¸æˆä¿¡æ¯"}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"ç‰ˆæœ¬"}),e.jsx("span",{className:"text-white font-semibold",children:"1.0.0"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"å¼€å‘è€…"}),e.jsx("span",{className:"text-white font-semibold",children:"MathChain Team"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"å¼•æ“Ž"}),e.jsx("span",{className:"text-white font-semibold",children:"React + Canvas"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-yellow-400",children:"âŒ¨ï¸ å¿«æ·é”®"}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"æš‚åœ/ç»§ç»­"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs",children:"ESC"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"ç»§ç»­æ¸¸æˆ"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs",children:"ç©ºæ ¼"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"é‡æ–°å¼€å§‹"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs",children:"Ctrl+R"})]})]})]}),e.jsxs(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"w-full btn btn-primary text-lg py-3 flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-xl",children:"âœ“"}),"ç¡®å®š"]}),e.jsx("div",{className:"absolute top-4 right-4 opacity-20",children:e.jsx(o.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"text-3xl",children:"âš™ï¸"})}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden rounded-2xl",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-10 animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-32 h-32 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-10 animate-pulse animation-delay-2000"})]})]})})},ze=({onClose:t})=>{const{stats:i}=B(),[a,n]=g.useState("all"),l={[y.ELEMENTARY]:"å°å­¦",[y.MIDDLE]:"åˆä¸­",[y.HIGH]:"é«˜ä¸­",[y.COLLEGE]:"å¤§å­¦",[y.HELL]:"åœ°ç‹±"},s={[y.ELEMENTARY]:"text-green-400",[y.MIDDLE]:"text-blue-400",[y.HIGH]:"text-purple-400",[y.COLLEGE]:"text-yellow-400",[y.HELL]:"text-red-400"},x={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}},h={hidden:{opacity:0,scale:.8,y:-50},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:30}},exit:{opacity:0,scale:.8,y:50}},p=({title:r,value:b,icon:c,color:v,delay:A=0})=>e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A},className:"bg-white/5 rounded-lg p-4 text-center border border-white/10",children:[e.jsx("div",{className:"text-2xl mb-2",children:c}),e.jsx("div",{className:`text-2xl font-bold ${v} mb-1`,children:typeof b=="number"?b.toLocaleString():b}),e.jsx("div",{className:"text-sm text-gray-300",children:r})]}),f=r=>{const b=Math.floor(r/3600),c=Math.floor(r%3600/60);return b>0?`${b}h ${c}m`:`${c}m`},u=a==="all"?{gamesPlayed:i.totalGamesPlayed,bestScore:i.bestScore,averageScore:Math.round(i.averageScore),levelsCompleted:i.levelsCompleted}:i.difficultyStats[a];return e.jsx(o.div,{className:"modal-overlay",variants:x,initial:"hidden",animate:"visible",exit:"exit",onClick:t,children:e.jsxs(o.div,{className:"modal-content bg-gradient-to-br from-gray-900 to-gray-800 text-white max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",variants:h,initial:"hidden",animate:"visible",exit:"exit",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(o.h2,{className:"text-3xl font-bold mb-2",animate:{textShadow:["0 0 0px rgba(59, 130, 246, 0)","0 0 10px rgba(59, 130, 246, 0.5)","0 0 0px rgba(59, 130, 246, 0)"]},transition:{duration:2,repeat:1/0},children:"ðŸ“Š æ¸¸æˆç»Ÿè®¡"}),e.jsx("p",{className:"text-gray-300",children:"æŸ¥çœ‹ä½ çš„æ¸¸æˆæˆå°±å’Œè¿›åº¦"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-3 text-center",children:"é€‰æ‹©éš¾åº¦"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("all"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${a==="all"?"bg-blue-500 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:"å…¨éƒ¨"}),Object.entries(l).map(([r,b])=>e.jsx(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(r),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${a===r?"bg-blue-500 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:b},r))]})]}),e.jsx(M,{mode:"wait",children:e.jsxs(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(p,{title:"æ¸¸æˆæ¬¡æ•°",value:u.gamesPlayed,icon:"ðŸŽ®",color:"text-blue-400",delay:.1}),e.jsx(p,{title:"æœ€é«˜åˆ†æ•°",value:u.bestScore,icon:"ðŸ†",color:"text-yellow-400",delay:.2}),e.jsx(p,{title:"å¹³å‡åˆ†æ•°",value:u.averageScore,icon:"ðŸ“ˆ",color:"text-green-400",delay:.3}),e.jsx(p,{title:"å®Œæˆå…³å¡",value:u.levelsCompleted,icon:"ðŸŽ¯",color:"text-purple-400",delay:.4})]},a)}),a==="all"&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-center text-blue-400",children:"ðŸŒŸ å…¨å±€æˆå°±"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(p,{title:"æ€»æ¸¸æˆæ—¶é—´",value:f(i.totalTime),icon:"â±ï¸",color:"text-cyan-400"}),e.jsx(p,{title:"å®Œç¾Žæ¸¸æˆ",value:i.perfectGames,icon:"ðŸ’Ž",color:"text-pink-400"}),e.jsx(p,{title:"æ€»åˆ†æ•°",value:i.totalScore,icon:"ðŸ’¯",color:"text-orange-400"})]})]}),a==="all"&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-center text-purple-400",children:"ðŸŽ“ éš¾åº¦æŽŒæ¡åº¦"}),e.jsx("div",{className:"space-y-3",children:Object.entries(l).map(([r,b])=>{const c=i.difficultyStats[r],v=Math.min(c.gamesPlayed/10*100,100);return e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:`font-semibold ${s[r]}`,children:b}),e.jsxs("span",{className:"text-sm text-gray-300",children:[c.gamesPlayed," å±€æ¸¸æˆ"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx(o.div,{className:`h-2 rounded-full bg-gradient-to-r ${r===y.ELEMENTARY?"from-green-400 to-green-500":r===y.MIDDLE?"from-blue-400 to-blue-500":r===y.HIGH?"from-purple-400 to-purple-500":r===y.COLLEGE?"from-yellow-400 to-yellow-500":"from-red-400 to-red-500"}`,initial:{width:0},animate:{width:`${v}%`},transition:{duration:1,delay:.7}})})]},r)})})]}),e.jsxs(o.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"w-full btn btn-primary text-lg py-3 flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-xl",children:"âœ“"}),"å…³é—­"]}),e.jsx("div",{className:"absolute top-4 right-4 opacity-20",children:e.jsx(o.div,{animate:{rotate:360,scale:[1,1.1,1]},transition:{rotate:{duration:10,repeat:1/0,ease:"linear"},scale:{duration:2,repeat:1/0}},className:"text-3xl",children:"ðŸ“Š"})})]})})},Ze=()=>{const{particles:t,removeParticle:i}=B(),a=g.useRef(null),n=g.useRef();g.useEffect(()=>{const s=a.current;if(!s)return;const x=s.getContext("2d");if(!x)return;const h=()=>{s.width=window.innerWidth,s.height=window.innerHeight};h(),window.addEventListener("resize",h);class p{constructor(r,b,c="star"){T(this,"x");T(this,"y");T(this,"vx");T(this,"vy");T(this,"life");T(this,"maxLife");T(this,"size");T(this,"color");T(this,"type");switch(this.x=r,this.y=b,this.vx=(Math.random()-.5)*4,this.vy=(Math.random()-.5)*4-2,this.life=1,this.maxLife=60+Math.random()*60,this.size=2+Math.random()*4,this.type=c,c){case"star":this.color=`hsl(${45+Math.random()*60}, 100%, 70%)`;break;case"explosion":this.color=`hsl(${Math.random()*60}, 100%, 60%)`,this.vx*=2,this.vy*=2;break;case"sparkle":this.color=`hsl(${200+Math.random()*160}, 80%, 80%)`,this.size*=.5;break;default:this.color="#ffffff"}}update(){this.x+=this.vx,this.y+=this.vy,this.vy+=.1,this.vx*=.99,this.life--,this.type==="sparkle"&&(this.vx*=.95,this.vy*=.95)}draw(r){const b=this.life/this.maxLife;if(r.save(),r.globalAlpha=b,this.type==="star"){r.fillStyle=this.color,r.beginPath();for(let c=0;c<5;c++){const v=c*Math.PI*2/5,A=this.x+Math.cos(v)*this.size,j=this.y+Math.sin(v)*this.size;c===0?r.moveTo(A,j):r.lineTo(A,j)}r.closePath(),r.fill()}else this.type==="explosion"?(r.fillStyle=this.color,r.beginPath(),r.arc(this.x,this.y,this.size,0,Math.PI*2),r.fill(),r.shadowColor=this.color,r.shadowBlur=this.size*2,r.fill()):this.type==="sparkle"&&(r.strokeStyle=this.color,r.lineWidth=2,r.beginPath(),r.moveTo(this.x-this.size,this.y),r.lineTo(this.x+this.size,this.y),r.moveTo(this.x,this.y-this.size),r.lineTo(this.x,this.y+this.size),r.stroke());r.restore()}isDead(){return this.life<=0}}let f=[];const m=()=>{x.clearRect(0,0,s.width,s.height),f=f.filter(u=>(u.update(),u.draw(x),!u.isDead())),n.current=requestAnimationFrame(m)};return m(),window.addCanvasParticles=(u,r,b=10,c="star")=>{for(let v=0;v<b;v++)f.push(new p(u,r,c))},()=>{window.removeEventListener("resize",h),n.current&&cancelAnimationFrame(n.current),delete window.addCanvasParticles}},[]);const l=({particle:s})=>(g.useEffect(()=>{const h=setTimeout(()=>{i(s.id)},s.duration);return()=>clearTimeout(h)},[s]),(()=>{switch(s.type){case"stars":return e.jsx(o.div,{className:"particle absolute pointer-events-none",style:{left:s.x,top:s.y,color:s.color},initial:{opacity:0,scale:0},animate:{opacity:[0,1,0],scale:[0,1,0],y:[0,-50],x:[0,(Math.random()-.5)*100]},transition:{duration:s.duration/1e3},children:[...Array(s.count)].map((h,p)=>e.jsx(o.span,{className:"absolute text-yellow-400",style:{left:Math.random()*20-10,top:Math.random()*20-10},animate:{rotate:360,scale:[1,1.5,1]},transition:{duration:1,repeat:1/0,delay:p*.1},children:"â­"},p))});case"explosion":return e.jsx(o.div,{className:"particle absolute pointer-events-none",style:{left:s.x,top:s.y},initial:{scale:0},animate:{scale:[0,2,0]},transition:{duration:s.duration/1e3},children:[...Array(s.count)].map((h,p)=>{const f=p/s.count*Math.PI*2,m=50;return e.jsx(o.div,{className:"absolute w-2 h-2 rounded-full",style:{backgroundColor:s.color},animate:{x:Math.cos(f)*m,y:Math.sin(f)*m,opacity:[1,0]},transition:{duration:s.duration/1e3}},p)})});case"sparkle":return e.jsx(o.div,{className:"particle absolute pointer-events-none",style:{left:s.x,top:s.y,color:s.color},initial:{opacity:0},animate:{opacity:[0,1,0],scale:[.5,1.5,.5]},transition:{duration:s.duration/1e3,repeat:3},children:"âœ¨"});case"numbers":return e.jsxs(o.div,{className:"particle absolute pointer-events-none font-bold text-2xl",style:{left:s.x,top:s.y,color:s.color},initial:{opacity:0,scale:.5,y:0},animate:{opacity:[0,1,0],scale:[.5,1.2,1],y:-100},transition:{duration:s.duration/1e3},children:["+",Math.floor(Math.random()*1e3)]});default:return null}})());return e.jsxs(e.Fragment,{children:[e.jsx("canvas",{ref:a,className:"fixed inset-0 pointer-events-none z-50",style:{mixBlendMode:"screen"}}),e.jsx("div",{className:"fixed inset-0 pointer-events-none z-40",children:e.jsx(M,{children:t.map(s=>e.jsx(l,{particle:s},s.id))})})]})},Je=()=>{const{soundEnabled:t,musicEnabled:i}=B(),a=g.useRef({}),n=g.useRef(null);g.useEffect(()=>(a.current={[S.MATCH]:new L.Howl({src:["data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"],volume:.6}),[S.COMBO]:new L.Howl({src:["data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"],volume:.8}),[S.POWER_UP]:new L.Howl({src:["data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"],volume:.7}),[S.LEVEL_UP]:new L.Howl({src:["data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"],volume:.9}),[S.GAME_OVER]:new L.Howl({src:["data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"],volume:.8}),[S.BUTTON_CLICK]:new L.Howl({src:["data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"],volume:.4}),[S.WRONG_MATCH]:new L.Howl({src:["data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"],volume:.5}),[S.TIME_WARNING]:new L.Howl({src:["data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"],volume:.7})},n.current=new L.Howl({src:["data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT"],loop:!0,volume:.3}),()=>{Object.values(a.current).forEach(x=>x.unload()),n.current&&n.current.unload()}),[]);const l=x=>{t&&a.current[x]&&a.current[x].play()};g.useEffect(()=>{i&&n.current?n.current.play():n.current&&n.current.pause()},[i]),g.useEffect(()=>B.subscribe(h=>h.score,(h,p)=>{h>p&&l(S.MATCH)}),[t]);const s=(x,h,p="sine")=>{if(t)try{const f=new(window.AudioContext||window.webkitAudioContext),m=f.createOscillator(),u=f.createGain();m.connect(u),u.connect(f.destination),m.frequency.value=x,m.type=p,u.gain.setValueAtTime(.3,f.currentTime),u.gain.exponentialRampToValueAtTime(.01,f.currentTime+h),m.start(f.currentTime),m.stop(f.currentTime+h)}catch(f){console.warn("Web Audio API not supported:",f)}};return g.useEffect(()=>(window.playGameSound=x=>{switch(x){case S.MATCH:s(523.25,.2);break;case S.COMBO:s(659.25,.3),setTimeout(()=>s(783.99,.3),100);break;case S.POWER_UP:s(440,.1),setTimeout(()=>s(554.37,.1),100),setTimeout(()=>s(659.25,.2),200);break;case S.LEVEL_UP:s(523.25,.2),setTimeout(()=>s(659.25,.2),200),setTimeout(()=>s(783.99,.2),400),setTimeout(()=>s(1046.5,.4),600);break;case S.GAME_OVER:s(220,.5,"sawtooth"),setTimeout(()=>s(196,.5,"sawtooth"),300),setTimeout(()=>s(174.61,.8,"sawtooth"),600);break;case S.BUTTON_CLICK:s(800,.1,"square");break;case S.WRONG_MATCH:s(150,.3,"sawtooth");break;case S.TIME_WARNING:s(1e3,.1),setTimeout(()=>s(1e3,.1),200);break}},()=>{delete window.playGameSound}),[t]),null},qe=()=>{const[t,i]=g.useState("menu"),[a,n]=g.useState(!1),[l,s]=g.useState(!1),{isPlaying:x,isPaused:h,isGameOver:p,startGame:f,pauseGame:m,resumeGame:u,resetGame:r}=B();g.useEffect(()=>{const j=d=>{switch(d.key){case"Escape":x&&!h?m():h&&u();break;case" ":d.preventDefault(),h&&u();break;case"r":(d.ctrlKey||d.metaKey)&&(d.preventDefault(),r(),i("menu"));break}};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[x,h,m,u,r]),g.useEffect(()=>{x?i("game"):p&&setTimeout(()=>{i("menu")},2e3)},[x,p]);const b=j=>{f(j),i("game")},c=()=>{r(),i("menu")},v=()=>{u()},A=()=>{x&&!h&&m()};return e.jsxs("div",{className:"game-container relative w-full h-full bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"}),e.jsx("div",{className:"absolute top-3/4 right-1/4 w-64 h-64 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse animation-delay-2000"}),e.jsx("div",{className:"absolute bottom-1/4 left-1/2 w-64 h-64 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse animation-delay-4000"})]}),e.jsx(Je,{}),e.jsx(Ze,{}),e.jsxs(M,{mode:"wait",children:[t==="menu"&&e.jsx(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.1},transition:{duration:.3},className:"absolute inset-0",children:e.jsx(Qe,{onStartGame:b,onShowSettings:()=>n(!0),onShowStats:()=>s(!0)})},"menu"),t==="game"&&e.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"absolute inset-0 flex flex-col",children:[e.jsx(_e,{onPause:A,onMenu:c}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(Ve,{})})]},"game")]}),e.jsx(M,{children:h&&e.jsx($e,{onResume:v,onRestart:()=>{r(),i("menu")},onMenu:c,onSettings:()=>n(!0)})}),e.jsx(M,{children:p&&e.jsx(We,{onRestart:()=>{r(),i("menu")},onMenu:c})}),e.jsx(M,{children:a&&e.jsx(Ye,{onClose:()=>n(!1)})}),e.jsx(M,{children:l&&e.jsx(ze,{onClose:()=>s(!1)})}),e.jsx("div",{className:"absolute bottom-2 right-2 text-white text-xs opacity-50 pointer-events-none",children:"MathChain Epoch v1.0.0"})]})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});document.addEventListener("touchstart",function(t){t.touches.length>1&&t.preventDefault()},{passive:!1});let $=0;document.addEventListener("touchend",function(t){const i=new Date().getTime();i-$<=300&&t.preventDefault(),$=i},!1);document.body.addEventListener("touchmove",function(t){t.preventDefault()},{passive:!1});F.createRoot(document.getElementById("root")).render(e.jsx(W.StrictMode,{children:e.jsx(qe,{})}));
//# sourceMappingURL=index-BgzDgCwY.js.map
